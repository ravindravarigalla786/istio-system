profile: ambient

# Global settings apply to all istiod components
global:
  defaultNodeSelector:
    karpenter.sh/nodepool: system
  defaultTolerations:
  - key: CriticalAddonsOnly
    operator: Exists
    effect: NoSchedule

pilot:
  env:
    PILOT_ENABLE_AMBIENT: "true"
  nodeSelector:
    karpenter.sh/nodepool: system
  tolerations:
  - key: CriticalAddonsOnly
    operator: Exists
    effect: NoSchedule

# Explicitly set meshConfig to enable ambient
meshConfig:
  defaultConfig:
    proxyMetadata:
      ISTIO_META_ENABLE_HBONE: "true"
